---
- name: Listen for events on a webhook
  hosts: all

  ## Define our source for events

  sources:
   - ansible.eda.instana:
       host: 0.0.0.0
       port: 5000

 ## Define the conditions we are looking for

  rules:
   - name: Test
     condition: event.payload.message == "Node failed"
     action:
        run_playbook:
          name: launch_controller_job.yml
   - name: Event 
     condition: event.payload.problem.problemText == "Erroneous call rate is too high"
     action:
        run_playbook:
          name: launch_controller_job.yml 
